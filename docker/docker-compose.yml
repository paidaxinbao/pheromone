# Agent Swarm - 3 个 OpenClaw Agent 容器
# 初始阶段：Agent 之间通过 GitHub 协作

services:
  # Developer Agent
  developer:
    build:
      context: ..
      dockerfile: docker/agent-developer/Dockerfile
    container_name: agent-swarm-developer
    environment:
      - GITHUB_TOKEN=${GITHUB_TOKEN}
      - OPENCLAW_MODEL=bailian/qwen3.5-plus
    volumes:
      - developer-workspace:/root/.openclaw/workspace
    networks:
      - agent-network
    ports:
      - "18791:18791"
    restart: unless-stopped

  # Reviewer Agent
  reviewer:
    build:
      context: ..
      dockerfile: docker/agent-reviewer/Dockerfile
    container_name: agent-swarm-reviewer
    environment:
      - GITHUB_TOKEN=${GITHUB_TOKEN}
      - OPENCLAW_MODEL=bailian/qwen3.5-plus
    volumes:
      - reviewer-workspace:/root/.openclaw/workspace
    networks:
      - agent-network
    ports:
      - "18792:18792"
    depends_on:
      - developer
    restart: unless-stopped

  # Tester Agent
  tester:
    build:
      context: ..
      dockerfile: docker/agent-tester/Dockerfile
    container_name: agent-swarm-tester
    environment:
      - GITHUB_TOKEN=${GITHUB_TOKEN}
      - OPENCLAW_MODEL=bailian/qwen3.5-plus
    volumes:
      - tester-workspace:/root/.openclaw/workspace
    networks:
      - agent-network
    ports:
      - "18793:18793"
    depends_on:
      - reviewer
    restart: unless-stopped

networks:
  agent-network:
    driver: bridge

volumes:
  developer-workspace:
  reviewer-workspace:
  tester-workspace: