# Pheromone - 3 Gateway 架构 + 共享任务队列 + 共享记忆

services:
  # ============ Gateway 1 (Developer) ============
  gateway-developer:
    image: openclaw:local
    container_name: pheromone-gateway-dev
    environment:
      - OPENCLAW_MODEL=bailian/glm-5
    volumes:
      - ./data/developer:/home/node/.openclaw
      - ../:/home/node/workspace:ro
      - C:\openclaw-shared:/home/node/shared:rw
    networks:
      - pheromone-network
    ports:
      - "18791:18789"
    working_dir: /home/node
    command: ["openclaw", "gateway", "--port", "18789", "--verbose"]
    restart: unless-stopped

  # ============ Gateway 2 (Reviewer) ============
  gateway-reviewer:
    image: openclaw:local
    container_name: pheromone-gateway-reviewer
    environment:
      - OPENCLAW_MODEL=bailian/glm-5
    volumes:
      - ./data/reviewer:/home/node/.openclaw
      - ../:/home/node/workspace:ro
      - C:\openclaw-shared:/home/node/shared:rw
    networks:
      - pheromone-network
    ports:
      - "18792:18789"
    working_dir: /home/node
    command: ["openclaw", "gateway", "--port", "18789", "--verbose"]
    restart: unless-stopped

  # ============ Gateway 3 (Tester) ============
  gateway-tester:
    image: openclaw:local
    container_name: pheromone-gateway-tester
    environment:
      - OPENCLAW_MODEL=bailian/glm-5
    volumes:
      - ./data/tester:/home/node/.openclaw
      - ../:/home/node/workspace:ro
      - C:\openclaw-shared:/home/node/shared:rw
    networks:
      - pheromone-network
    ports:
      - "18793:18789"
    working_dir: /home/node
    command: ["openclaw", "gateway", "--port", "18789", "--verbose"]
    restart: unless-stopped

networks:
  pheromone-network:
    driver: bridge